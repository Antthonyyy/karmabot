# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –≤—Ö–æ–¥–∞ –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `useUserState.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –∏–º—è route –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
```typescript
// ‚ùå –ë–´–õ–û:
if (!user.subscription || user.subscription === 'none') return 'subscriptions';

// ‚úÖ –°–¢–ê–õ–û:
if (!user.subscription || user.subscription === 'none') return 'subscription';
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç route –≤ App.tsx (`/subscriptions`)

### 2. ‚úÖ –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ü–æ—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏**:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç ‚Üí `LoginPage`
2. –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí `OnboardingPage` (–≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏)
3. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí `SubscriptionsPage` (–≤—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏)
4. –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ ‚Üí `DashboardPage`

**–ö–æ–¥ –≤ `OnboardingPage.tsx` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**:
```typescript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
setTimeout(() => {
  setLocation('/subscriptions'); // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
}, 100);
```

### 3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏

**GoogleLoginButton.tsx** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```typescript
if (data.isNewUser || !data.user.hasCompletedOnboarding) {
  setLocation('/onboarding');
} else if (data.needsSubscription) {
  setLocation('/subscriptions');
} else {
  setLocation('/dashboard');
}
```

**UserFlowManager.tsx** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```typescript
useEffect(() => {
  if (nextStep !== 'dashboard') {
    setLocation(`/${nextStep}`);
  }
}, [nextStep, setLocation]);
```

### 4. ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å API

**`/api/user/setup-reminders`** –≤ `server/routes.ts`:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `reminderMode` –∏ `dailyPrinciplesCount`
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è `custom` —Ä–µ–∂–∏–º–∞

**`/api/user/onboarding/complete`**:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–º–µ—á–∞–µ—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `hasCompletedOnboarding: true`

### 5. ‚ö†Ô∏è –ú–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

**ReminderModeSelector.tsx**:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π UI –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–æ–≤

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏

```
üöÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç
    ‚Üì
üìù LoginPage ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç nextStep
    ‚Üì
üëã OnboardingPage (–µ—Å–ª–∏ !hasCompletedOnboarding)
    ‚Üì –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏
üí≥ SubscriptionsPage (–µ—Å–ª–∏ subscription === 'none')
    ‚Üì –≤—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏  
üè† DashboardPage (–æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **–õ–æ–≥–∏–∫–∞ –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è**  
‚úÖ **API endpoints –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫**  

–°–∏—Å—Ç–µ–º–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –∏ –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ! 
üõ†  –ó–ê–î–ê–ß–ê: Telegram-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å–Ω–æ–≤–∞ –ª–æ–º–∞–µ—Ç—Å—è  
üêû –°–∏–º–ø—Ç–æ–º—ã
1. –í –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /start –ø–∞–¥–∞–µ–º:  
   `error: column "avatar_url" does not exist`  
   ‚Üí –∫—Ä–∞—à–∏—Ç—Å—è `DatabaseStorage.getUserByTelegramId` –∏ —Å–µ—Å—Å–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–π.
2. Front-end –∫—Ä—É—Ç–∏—Ç—Å—è –Ω–∞ ‚Äú–û—á—ñ–∫—É—î–º–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é‚Ä¶‚Äù, –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç ¬´–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞‚Ä¶¬ª.
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –≤—ã–Ω—É–∂–¥–µ–Ω –Ω–∞–∂–∏–º–∞—Ç—å /start –≤—Ä—É—á–Ω—É—é (—Ä–∞–Ω—å—à–µ deep-link —Ä–∞–±–æ—Ç–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
A. **–£–±—Ä–∞—Ç—å –∞–≤–∞—Ä–∏–π–Ω—ã–π –≤—ã–∑–æ–≤ avatar_url**  
   1. –í `server/storage.ts` –Ω–∞–π–¥–∏—Ç–µ _–≤—Å–µ_ –º–µ—Ç–æ–¥—ã, –≥–¥–µ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è `avatarUrl`/`avatar_url`  
      * (`getUser`, `getUserByTelegramId`, `getUserByUsername` –∏ —Ç.–¥.)  
   2. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —è–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ **–±–µ–∑** `avatarUrl` ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ id, firstName, lastName, username, telegramId.  
      _–ü—Ä–∏–º–µ—Ä:_  
      ```ts
      const [user] = await db
        .select({
          id: users.id,
          firstName: users.firstName,
          lastName: users.lastName,
          username: users.username,
          telegramId: users.telegramId
        })
        .from(users)
        .where(eq(users.telegramId, telegramId))
        .limit(1);
      ```
   3. –í –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **–Ω–∏–≥–¥–µ –±–æ–ª—å—à–µ** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è avatarUrl.

B. **–ü–æ—á–∏–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ deep-link**  
   1. –í `server/bot/index.ts` –≤ —Ö–µ–Ω–¥–ª–µ—Ä–µ `/start`:
      * –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏–º `sessionId` –∏–∑ `ctx.startPayload`.
      * –í—ã–∑–æ–≤ `storage.createOrUpdateSession(sessionId, userId)` –∑–∞–≤–µ—Ä—à–∞–µ–º **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ** —É—Å–ø–µ—à–Ω–æ–≥–æ `getUser‚Ä¶` / `createUser‚Ä¶`.
      * –û—Ç–ø—Ä–∞–≤–ª—è–µ–º ¬´‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞!¬ª –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç.
   2. –í `client/src/components/TelegramLoginButton.tsx`
      * –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É `https://t.me/<BOT_USERNAME>?start=<sessionId>` (—á—Ç–æ–±—ã Telegram —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–ª /start).

C. **–ü—Ä–æ–≤–µ—Ä–∫–∞**  
   1. `pnpm dev` ‚Üí —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å _–±–µ–∑_ –æ—à–∏–±–∫–∏ avatar_url.  
   2. –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ –Ω–∞–∂–∏–º–∞—é ¬´–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram¬ª:  
      * –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, /start –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –≤ –æ—Ç–≤–µ—Ç ‚Äî ¬´‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞!¬ª.  
      * –≤–∫–ª–∞–¥–∫–∞ —Å–∞–π—Ç–∞ –ø–æ–ª—É—á–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (polling `/check-session/:id` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `authorized:true`) –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ /dashboard.  
   3. –ö–æ–Ω—Å–æ–ª—å —á–∏—Å—Ç–∞—è, 500 –Ω–µ—Ç.

üö¶ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
* **–ù–µ —Ç—Ä–æ–≥–∞–µ–º** VAPID, –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã ‚Äî —Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏–º avatar_url + Telegram auth.
* –û–¥–∏–Ω commit, –æ–¥–∏–Ω run.
* –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∞ `avatar_url` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –±—É–¥—É—â–µ–º ‚Äî –¥–æ–±–∞–≤–∏–º –º–∏–≥—Ä–∞—Ü–∏–µ–π –ø–æ–∑–∂–µ, —Å–µ–π—á–∞—Å —É–±–∏—Ä–∞–µ–º, —á—Ç–æ–±—ã –Ω–µ –ø–∞–¥–∞–ª–æ.

# üîÑ –ù–æ–≤—ã–π –ø–æ—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞: –ü–æ–¥–ø–∏—Å–∫–∞ ‚Üí –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ—Ç–æ–∫
```
–í—Ö–æ–¥ ‚Üí –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ ‚Üí –ü–æ–¥–ø–∏—Å–∫–∞ ‚Üí –ì–ª–∞–≤–Ω–∞—è
```

### ‚úÖ –ù–æ–≤—ã–π –ø–æ—Ç–æ–∫ 
```
–í—Ö–æ–¥ ‚Üí –ü–æ–¥–ø–∏—Å–∫–∞ ‚Üí –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ ‚Üí –ì–ª–∞–≤–Ω–∞—è
```

## –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞

```mermaid
graph TD
    A[üöÄ Google –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è] --> B{–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?}
    
    B -->|–î–∞| C[üí≥ SubscriptionsPage]
    B -->|–ù–µ—Ç| D{–ï—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞?}
    
    D -->|–ù–µ—Ç| C
    D -->|–î–∞| E{–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è?}
    
    C -->|–£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞| F[üëã OnboardingPage]
    F -->|–í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏| G[üè† DashboardPage]
    
    E -->|–ù–µ—Ç| F
    E -->|–î–∞| G
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. `useUserState.ts` - –∏–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫
```typescript
const determineUserFlow = () => {
  if (!user) return 'login';
  // ‚úÖ –ü–ï–†–í–´–ú –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É
  if (!user.subscription || user.subscription === 'none') return 'subscription';
  // ‚úÖ –í–¢–û–†–´–ú –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
  if (!user.hasCompletedOnboarding) return 'onboarding';
  return 'dashboard';
};
```

### 2. `GoogleLoginButton.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏
```typescript
// ‚úÖ –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–Ω–∞—á–∞–ª–∞ –∏–¥—É—Ç –Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
if (data.needsSubscription || data.isNewUser) {
  setLocation('/subscriptions');
} else if (!data.user.hasCompletedOnboarding) {
  setLocation('/onboarding');
} else {
  setLocation('/dashboard');
}
```

### 3. `SubscriptionsPage.tsx` - –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã ‚Üí –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
```typescript
// ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –∏–¥–µ–º –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
toast({
  title: "üéâ –ü—ñ–¥–ø–∏—Å–∫—É –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ!",
  description: `–¢–µ–ø–µ—Ä –Ω–∞–ª–∞—à—Ç—É—î–º–æ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è...`,
});
setLocation('/onboarding');
```

### 4. `OnboardingPage.tsx` - –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –Ω–∞ –≥–ª–∞–≤–Ω—É—é
```typescript
// ‚úÖ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ –∏–¥–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é
setTimeout(() => {
  setLocation('/dashboard');
}, 100);
```

## –õ–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üÜï –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ø–µ—Ä–≤—ã–π –≤—Ö–æ–¥)
1. **Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç
2. **SubscriptionsPage** ‚Üí –≤—ã–±–æ—Ä –∏ –æ–ø–ª–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∫–∏  
3. **OnboardingPage** ‚Üí –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
4. **DashboardPage** ‚Üí –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### üîÑ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏
1. **Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Üí –≤—Ö–æ–¥ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç
2. **SubscriptionsPage** ‚Üí –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
3. **OnboardingPage** ‚Üí –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
4. **DashboardPage** ‚Üí –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø–æ–¥–ø–∏—Å–∫–æ–π
1. **Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Üí –≤—Ö–æ–¥
2. **OnboardingPage** ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–µ—Å–ª–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω –æ–Ω–±–æ—Ä–¥–∏–Ω–≥)
3. **DashboardPage** ‚Üí –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### üèÜ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
1. **Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Üí —Å—Ä–∞–∑—É –Ω–∞ **DashboardPage**

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞

‚úÖ **–õ–æ–≥–∏—á–Ω–æ**: –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∞ —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫—É  
‚úÖ **–ú–æ—Ç–∏–≤–∞—Ü–∏—è**: –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ–ª–µ–µ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è  
‚úÖ **–ö–æ–Ω–≤–µ—Ä—Å–∏—è**: –ú–µ–Ω—å—à–µ —à–∞–Ω—Å–æ–≤, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–π–¥–µ—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π  
‚úÖ **UX**: –ß–µ—Ç–∫–∏–π –ª–∏–Ω–µ–π–Ω—ã–π –ø–æ—Ç–æ–∫ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

## –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | subscription | hasCompletedOnboarding | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|-----------|-------------|------------------------|-------------|
| –ù–æ–≤—ã–π | `none` | `false` | ‚Üí Subscriptions |
| –û–ø–ª–∞—Ç–∏–ª | `light/plus/pro` | `false` | ‚Üí Onboarding |
| –ù–∞—Å—Ç—Ä–æ–∏–ª | `light/plus/pro` | `true` | ‚Üí Dashboard |
| –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ | `none` | `true` | ‚Üí Subscriptions | 
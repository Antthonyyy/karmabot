export function checkEnvVariables() {
  const required = [
    'JWT_SECRET',
    'DATABASE_URL'
  ];
  
  const optional = [
    'GOOGLE_CLIENT_ID',
    'OPENAI_API_KEY',
    'WAYFORPAY_MERCHANT', 
    'WAYFORPAY_SECRET',
    'FRONTEND_URL',
    'TELEGRAM_BOT_TOKEN',
    'WEBHOOK_SECRET'
  ];
  
  const missing = required.filter(key => !process.env[key]);
  
  if (missing.length > 0) {
    console.error('‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:', missing);
    console.log('üìù –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è');
    missing.forEach(key => {
      console.log(`- ${key}`);
    });
    return false;
  }
  
  const missingOptional = optional.filter(key => !process.env[key]);
  if (missingOptional.length > 0) {
    console.log('‚ö†Ô∏è  –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:', missingOptional);
  }
  
  console.log('‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
  return true;
}

export function logEnvStatus() {
  const envVars = [
    'OPENAI_API_KEY',
    'WAYFORPAY_MERCHANT', 
    'WAYFORPAY_SECRET',
    'FRONTEND_URL',
    'JWT_SECRET',
    'DATABASE_URL',
    'TELEGRAM_BOT_TOKEN',
    'GOOGLE_CLIENT_ID',
    'WEBHOOK_SECRET'
  ];
  
  // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º sensitive environment variables
  const sensitiveVars = ['JWT_SECRET', 'WAYFORPAY_SECRET', 'OPENAI_API_KEY', 'DATABASE_URL', 'TELEGRAM_BOT_TOKEN', 'WEBHOOK_SECRET'];
  
  console.log('\nüîç –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:');
  envVars.forEach(key => {
    const value = process.env[key];
    if (value) {
      if (sensitiveVars.includes(key)) {
        console.log(`‚úÖ ${key}: [CONFIGURED]`);
      } else {
        console.log(`‚úÖ ${key}: ${value.length > 20 ? value.substring(0, 20) + '...' : value}`);
      }
    } else {
      console.log(`‚ùå ${key}: –Ω–µ –∑–∞–¥–∞–Ω–æ`);
    }
  });
  console.log('');
}

// –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
export function getAppConfig() {
  return {
    openai: {
      apiKey: process.env.OPENAI_API_KEY,
      available: !!process.env.OPENAI_API_KEY
    },
    wayforpay: {
      merchant: process.env.WAYFORPAY_MERCHANT,
      secret: process.env.WAYFORPAY_SECRET,
      available: !!(process.env.WAYFORPAY_MERCHANT && process.env.WAYFORPAY_SECRET)
    },
    app: {
      frontendUrl: process.env.FRONTEND_URL,
      jwtSecret: process.env.JWT_SECRET,
      databaseUrl: process.env.DATABASE_URL
    },
    telegram: {
      botToken: process.env.TELEGRAM_BOT_TOKEN,
      available: !!process.env.TELEGRAM_BOT_TOKEN
    }
  };
}
# üóÉÔ∏è –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–í –ø—Ä–æ–µ–∫—Ç–µ –±—ã–ª–∞ –ø—É—Ç–∞–Ω–∏—Ü–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- –í `.env` –±—ã–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¥–ª—è Supabase (`DATABASE_URL`) –∏ –¥–ª—è NeonDB (`PGHOST`, `PGDATABASE`, `PGUSER`)
- –í –∫–æ–¥–µ –±—ã–ª–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase, –∏–≥–Ω–æ—Ä–∏—Ä—É—è `DATABASE_URL`
- –ù–µ–Ω—É–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Å–æ—Ä—è–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

**`server/db.ts`**:
```typescript
// ‚ùå –ë–´–õ–û (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ):
const supabaseUrl = 'postgresql://postgres.babyubgvqronpuezmmrb:...';
const databaseUrl = supabaseUrl;

// ‚úÖ –°–¢–ê–õ–û (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è .env):
const databaseUrl = process.env.DATABASE_URL;
```

### 2. –û—á–∏—â–µ–Ω .env —Ñ–∞–π–ª

**–£–¥–∞–ª–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `PGHOST` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ
- `PGDATABASE` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ  
- `PGUSER` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ
- `PGPASSWORD` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ

**–û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `DATABASE_URL` - —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `OPENAI_API_KEY` - –¥–ª—è –ò–ò —Å–µ—Ä–≤–∏—Å–æ–≤
- `TELEGRAM_BOT_TOKEN` - –¥–ª—è Telegram –±–æ—Ç–∞
- `GOOGLE_CLIENT_ID` - –¥–ª—è Google OAuth
- `WAYFORPAY_MERCHANT`, `WAYFORPAY_SECRET` - –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- `FRONTEND_URL`, `JWT_SECRET` - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ–ª—å–∫–æ Supabase PostgreSQL** —á–µ—Ä–µ–∑ –¥–≤–∞ –∫–ª–∏–µ–Ω—Ç–∞:

1. **Drizzle ORM** (`server/db.ts`) - –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
   ```typescript
   const pool = new Pool({ connectionString: process.env.DATABASE_URL });
   export const db = drizzle(pool, { schema });
   ```

2. **Supabase Client** (`server/supabase.ts`) - –¥–ª—è Storage/Auth
   ```typescript
   export const supabase = createClient(supabaseUrl, password);
   ```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: —Ç–æ–ª—å–∫–æ Supabase  
‚úÖ **–ß–∏—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —É–¥–∞–ª–µ–Ω –º—É—Å–æ—Ä –∏–∑ `.env`  
‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DATABASE_URL`  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  

## –ú–∏–≥—Ä–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL` –≤ `.env` - –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è. 